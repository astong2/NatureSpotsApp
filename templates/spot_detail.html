{% extends 'layout.html' %}
{% block title %}{{ spot.title }} | NatureSpots{% endblock %}

{% block content %}
<a href="{{ url_for('home') }}">&larr; Back to spots</a>

<div class="spot-card" style="margin-top:12px">
  <h2>{{ spot.title }}</h2>
  <p><strong>Location:</strong> {{ spot.location }}</p>
  <p><strong>Tags:</strong> {{ spot.tags }}</p>

  {% if spot.image_url %}
    <img src="{{ spot.image_url }}" alt="Image of {{ spot.title }}" width="640">
  {% endif %}

  <p style="margin-top:10px">{{ spot.description }}</p>
  <p><em>Added by {{ spot.creator.username }}</em></p>

  <p style="margin-top:10px">
    {% if session.get('user_id') %}
      <form action="{{ url_for('toggle_save', spot_id=spot.id) }}" method="POST" class="inline">
        <button type="submit" class="btn btn-save">
          {% if is_saved %}Unsave{% else %}Save{% endif %}
        </button>
      </form>
    {% endif %}

    {% if session.get('user_id') == spot.user_id %}
      <a href="{{ url_for('edit_spot', spot_id=spot.id) }}" class="btn btn-edit">Edit</a>
      <form action="{{ url_for('delete_spot', spot_id=spot.id) }}" method="POST" class="inline" onsubmit="return confirm('Delete this spot?');">
        <button type="submit" class="btn btn-delete">Delete</button>
      </form>
    {% endif %}
  </p>
</div>
{% endblock %}
